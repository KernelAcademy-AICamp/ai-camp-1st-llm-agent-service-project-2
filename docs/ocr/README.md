# PDF OCR í…ìŠ¤íŠ¸ ì¶”ì¶œ ë° ë²•ë¥  ë°ì´í„° êµ¬ì¡°í™” ì‹œìŠ¤í…œ

íŒë¡€ ë° ê³„ì•½ì„œ PDF íŒŒì¼ì„ OCR ì—”ì§„ìœ¼ë¡œ í…ìŠ¤íŠ¸ë¥¼ ì¶”ì¶œí•˜ê³ , ê¸°ì¡´ ë²•ë¥  ë°ì´í„° ì‚¬ì´íŠ¸ì™€ ë™ì¼í•œ CSV/JSON í˜•ì‹ìœ¼ë¡œ êµ¬ì¡°í™”í•˜ì—¬ ì €ì¥í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## í•µì‹¬ ê¸°ëŠ¥

- **ë©€í‹° OCR ì—”ì§„ ì§€ì›**: Tesseract (CPU), EasyOCR (GPU), PaddleOCR (GPU)
- **í•˜ë“œì›¨ì–´ ìë™ ê°ì§€**: CUDA, Apple Silicon (MPS), AMD ROCm, CPU
- **ë²•ë¥  ë°ì´í„° í˜•ì‹ í˜¸í™˜**: CSV (êµ¬ì¡°í™” ë°ì´í„°) + JSON (AI ë¼ë²¨)
- **ë°ì´í„°ë² ì´ìŠ¤ ë¶„ë¦¬**: ì „ì²´DB (ê³µê°œ) / ì‚¬ìš©ìDB (ì•”í˜¸í™”)
- **ë¹„ë™ê¸° ì²˜ë¦¬**: Celery + Redisë¥¼ ì´ìš©í•œ ë°±ê·¸ë¼ìš´ë“œ OCR ì‘ì—…
- **REST API**: FastAPI ê¸°ë°˜ì˜ ì™„ì „í•œ API ì‹œìŠ¤í…œ

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend (React)                          â”‚
â”‚     íŒŒì¼ ì—…ë¡œë“œ UI  |  ë¬¸ì„œ ê´€ë¦¬  |  ê²€ìƒ‰ ì¸í„°í˜ì´ìŠ¤        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTPS/REST API
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                API Gateway (FastAPI)                         â”‚
â”‚          ì¸ì¦/ì¸ê°€ (JWT)  |  Rate Limiting                   â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚              â”‚              â”‚
    â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Upload   â”‚  â”‚ OCR      â”‚  â”‚ Document     â”‚
â”‚ Service  â”‚  â”‚ Service  â”‚  â”‚ Management   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚             â”‚                â”‚
     â”‚             â–¼                â”‚
     â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
     â”‚      â”‚ Celery      â”‚         â”‚
     â”‚      â”‚ Worker      â”‚         â”‚
     â”‚      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â”‚
     â”‚             â”‚                â”‚
     â–¼             â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Storage Layer                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PostgreSQL DB   â”‚  MinIO/S3        â”‚  Redis Cache         â”‚
â”‚ (ì „ì²´DB+ì‚¬ìš©ìDB) â”‚  (íŒŒì¼ ì €ì¥ì†Œ)   â”‚  (ì„¸ì…˜/í ë°ì´í„°)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ë¹ ë¥¸ ì‹œì‘

> **ğŸ“– ìƒì„¸ ë¬¸ì„œ**:
> - [Tesseract ì„¤ì¹˜ ê°€ì´ë“œ](TESSERACT_INSTALLATION.md)
> - [í…ŒìŠ¤íŠ¸ ê²°ê³¼](TESSERACT_TEST_RESULTS.md)
> - [í˜„ì¬ ê°œë°œ ìƒíƒœ](CURRENT_STATUS.md)

### 1. í•„ìˆ˜ ìš”êµ¬ì‚¬í•­

- Python 3.10 ì´ìƒ
- PostgreSQL 15 ì´ìƒ
- Redis 7 ì´ìƒ
- Tesseract OCR 4.x
- MinIO ë˜ëŠ” AWS S3

### 2. ì„¤ì¹˜

```bash
# 1. ì €ì¥ì†Œ í´ë¡  ë° ê°€ìƒí™˜ê²½ ìƒì„±
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 2. ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# 3. Tesseract OCR ì„¤ì¹˜ (Ubuntu/Debian)
sudo apt-get install -y tesseract-ocr tesseract-ocr-kor tesseract-ocr-eng
sudo apt-get install -y poppler-utils

# macOS
brew install tesseract tesseract-lang poppler
```

### 3. í™˜ê²½ ì„¤ì •

`.env` íŒŒì¼ ìƒì„±:

```bash
cp .env.example .env
```

`.env` íŒŒì¼ í¸ì§‘í•˜ì—¬ í•„ìš”í•œ ê°’ ì„¤ì •:

```env
# Application
APP_NAME=PDF OCR System
SECRET_KEY=your-secret-key-here

# Database
DATABASE_URL=postgresql+asyncpg://ocruser:ocrpassword@localhost:5432/ocrdb

# Redis
REDIS_URL=redis://localhost:6379/0

# Storage (MinIO)
STORAGE_ENDPOINT=localhost:9000
STORAGE_ACCESS_KEY=minioadmin
STORAGE_SECRET_KEY=minioadmin

# Encryption
ENCRYPTION_KEY=your-fernet-key-here

# OCR Engine (auto, tesseract, easyocr, paddleocr)
OCR_ENGINE=auto
```

ì•”í˜¸í™” í‚¤ ìƒì„±:

```bash
python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
```

### 4. ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”

```bash
# PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
sudo -u postgres psql
CREATE DATABASE ocrdb;
CREATE USER ocruser WITH PASSWORD 'ocrpassword';
GRANT ALL PRIVILEGES ON DATABASE ocrdb TO ocruser;
\q

# Alembic ë§ˆì´ê·¸ë ˆì´ì…˜ (ì„ íƒì‚¬í•­)
alembic upgrade head
```

### 5. ì„œë¹„ìŠ¤ ì‹¤í–‰

```bash
# Terminal 1: FastAPI ì„œë²„
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# Terminal 2: Redis (Docker)
docker run -d -p 6379:6379 redis:7-alpine

# Terminal 3: MinIO (Docker)
docker run -d -p 9000:9000 -p 9001:9001 \
  -e "MINIO_ROOT_USER=minioadmin" \
  -e "MINIO_ROOT_PASSWORD=minioadmin" \
  minio/minio server /data --console-address ":9001"
```

### 6. API í…ŒìŠ¤íŠ¸

```bash
# í—¬ìŠ¤ ì²´í¬
curl http://localhost:8000/health

# í•˜ë“œì›¨ì–´ ì •ë³´ í™•ì¸
curl http://localhost:8000/hardware-info

# OCR ì—”ì§„ ì •ë³´ í™•ì¸
curl http://localhost:8000/ocr-engine-info
```

API ë¬¸ì„œ: http://localhost:8000/docs

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
.
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/                    # API ì—”ë“œí¬ì¸íŠ¸
â”‚   â”‚   â””â”€â”€ v1/
â”‚   â”‚       â””â”€â”€ endpoints/
â”‚   â”œâ”€â”€ core/                   # í•µì‹¬ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ config.py          # í™˜ê²½ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ database.py        # DB ì—°ê²°
â”‚   â”‚   â”œâ”€â”€ security.py        # ì¸ì¦/ì•”í˜¸í™”
â”‚   â”‚   â””â”€â”€ hardware_detector.py # GPU/CPU ê°ì§€
â”‚   â”œâ”€â”€ models/                 # ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ user.py
â”‚   â”‚   â””â”€â”€ document.py
â”‚   â”œâ”€â”€ services/              # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ ocr_engine_selector.py
â”‚   â”‚   â”œâ”€â”€ ocr_engines.py
â”‚   â”‚   â”œâ”€â”€ multi_engine_ocr_service.py
â”‚   â”‚   â””â”€â”€ storage_service.py
â”‚   â”œâ”€â”€ workers/               # Celery Workers
â”‚   â”œâ”€â”€ schemas/               # Pydantic ìŠ¤í‚¤ë§ˆ
â”‚   â”œâ”€â”€ utils/                 # ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ main.py               # FastAPI ì•±
â”œâ”€â”€ .claude/                   # ì„¤ê³„ ë¬¸ì„œ
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ pdf_ocr_system_architecture.md
â”‚   â”œâ”€â”€ OCR_DATA_STRUCTURE_AND_GPU_DESIGN.md
â”‚   â””â”€â”€ QUICKSTART_GUIDE.md
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .env.example
â””â”€â”€ README.md
```

## GPU/CPU ìë™ ê°ì§€

ì‹œìŠ¤í…œì€ í•˜ë“œì›¨ì–´ í™˜ê²½ì— ë”°ë¼ ìë™ìœ¼ë¡œ ìµœì ì˜ OCR ì—”ì§„ì„ ì„ íƒí•©ë‹ˆë‹¤:

| í•˜ë“œì›¨ì–´ | OCR ì—”ì§„ | ë¹„ê³  |
|----------|----------|------|
| **NVIDIA GPU (CUDA)** | PaddleOCR / EasyOCR | ê°€ì¥ ë¹ ë¥´ê³  ì •í™• |
| **Apple Silicon (MPS)** | EasyOCR | M1/M2/M3 Mac |
| **AMD GPU (ROCm)** | PaddleOCR / EasyOCR | Linux only |
| **CPU** | Tesseract | ê°€ì¥ ì•ˆì •ì  |

**ì„ íƒ ë¡œì§**:
- GPU ìˆê³  VRAM â‰¥ 4GB â†’ **PaddleOCR** (ìµœê³  ì •í™•ë„)
- GPU ìˆê³  VRAM < 4GB â†’ **EasyOCR** (ë©”ëª¨ë¦¬ íš¨ìœ¨)
- CPUë§Œ ì‚¬ìš© ê°€ëŠ¥ â†’ **Tesseract** (ê°€ì¥ ì•ˆì •ì )

## ë°ì´í„° í˜•ì‹

### CSV í˜•ì‹ (êµ¬ì¡°í™” ë°ì´í„°)

#### íŒë¡€
```csv
íŒë¡€ì¼ë ¨ë²ˆí˜¸,êµ¬ë¶„,ë¬¸ì¥ë²ˆí˜¸,ë‚´ìš©
64524,íŒë¡€ë‚´ìš©,1,ã€í”¼ ê³  ì¸ã€‘
64524,íŒë¡€ë‚´ìš©,2,ã€í•­ ì†Œ ì¸ã€‘ í”¼ê³ ì¸
```

#### í•´ì„ë¡€
```csv
í•´ì„ë¡€ì¼ë ¨ë²ˆí˜¸,êµ¬ë¶„,ë¬¸ì¥ë²ˆí˜¸,ë‚´ìš©
312586,ì§ˆì˜ìš”ì§€,1,"ã€Œìë™ì°¨ì†í•´ë°°ìƒë³´ì¥ë²•ã€..."
312586,íšŒë‹µ,2,...
```

### JSON í˜•ì‹ (AI ë¼ë²¨)

```json
{
    "info": {
        "lawClass": "02",
        "DocuType": "03",
        "interpreId": "312864",
        "agenda": "ê³µì¤‘ìœ„ìƒê´€ë¦¬ë²•ì œ11ì¡°(ì ìš©ë²•ë¥ )ê´€ë ¨",
        "interpreDate": "2005.11.25"
    },
    "label": {
        "instruction": "ì§ˆì˜ì— ëŒ€í•œ ì‘ë‹µì€ 15ì–´ì ˆ ì´ìƒ...",
        "input": "ê²½ì°°ê´€ì„œì—ì„œ ìˆ™ë°•ì—…ìê°€...",
        "output": "ê²½ì°°ê´€ì„œì—ì„œ ìˆ™ë°•ì—…ìì˜...",
        "originwordCnt": "62",
        "labelwordCnt": "53"
    }
}
```

## ê°œë°œ ë¡œë“œë§µ

### âœ… ì™„ë£Œëœ ê¸°ëŠ¥
- [x] í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ì •
- [x] í•˜ë“œì›¨ì–´ ìë™ ê°ì§€ ì‹œìŠ¤í…œ
- [x] ë©€í‹° OCR ì—”ì§„ ì§€ì› (í”„ë ˆì„ì›Œí¬)
- [x] Tesseract OCR ì„¤ì¹˜ ë° í†µí•© ì™„ë£Œ
- [x] ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸ ì •ì˜
- [x] íŒŒì¼ ì €ì¥ì†Œ ì„œë¹„ìŠ¤
- [x] í™˜ê²½ ì„¤ì • ë° ë³´ì•ˆ

### ğŸ”„ ì§„í–‰ ì¤‘
- [ ] íŒŒì¼ ì—…ë¡œë“œ API
- [ ] OCR ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸
- [ ] Celery Worker êµ¬í˜„
- [ ] CSV/JSON ì¶œë ¥ í¬ë§·í„°

### ğŸ“‹ ì˜ˆì •
- [ ] ë¬¸ì„œ ê´€ë¦¬ API (CRUD)
- [ ] ê²€ìƒ‰ ê¸°ëŠ¥
- [ ] ì‚¬ìš©ì ì¸ì¦/ì¸ê°€
- [ ] í”„ë¡ íŠ¸ì—”ë“œ UI
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ
- [ ] Docker Compose ë°°í¬

## ë³´ì•ˆ

- **JWT ê¸°ë°˜ ì¸ì¦**: 24ì‹œê°„ ìœ íš¨ í† í°
- **íŒŒì¼ ì•”í˜¸í™”**: AES-256-GCM (ì‚¬ìš©ìDB)
- **Rate Limiting**: ì‹œê°„ë‹¹ 10ê°œ ì—…ë¡œë“œ ì œí•œ
- **ê°ì‚¬ ë¡œê·¸**: ëª¨ë“  ì‘ì—… ì¶”ì 
- **íŒŒì¼ ê²€ì¦**: í¬ê¸°, í™•ì¥ì, MIME íƒ€ì… ê²€ì¦

## ì„±ëŠ¥ ìµœì í™”

- **ë³‘ë ¬ ì²˜ë¦¬**: ë©€í‹°í”„ë¡œì„¸ì‹±ìœ¼ë¡œ í˜ì´ì§€ë³„ ë³‘ë ¬ OCR
- **GPU ê°€ì†**: CUDA/MPS ìë™ í™œìš©
- **Redis ìºì‹±**: ë©”íƒ€ë°ì´í„°, OCR ìƒíƒœ, ê²€ìƒ‰ ê²°ê³¼
- **DB ì¸ë±ì‹±**: ë³µí•© ì¸ë±ìŠ¤ë¡œ ì¿¼ë¦¬ ìµœì í™”

## ë¼ì´ì„ ìŠ¤

MIT License

## ë¬¸ì˜

í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì§ˆë¬¸ì´ë‚˜ ì œì•ˆì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ Issueë¥¼ ë“±ë¡í•´ì£¼ì„¸ìš”.

---

**Made with â¤ï¸ for AI Legal Document Analysis Service**
