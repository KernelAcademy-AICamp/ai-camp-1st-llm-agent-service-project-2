# 크롤링 데이터 vs 통합 데이터 비교 결과

## 📊 개요

크롤링 스크립트로 수집한 샘플 데이터와 통합 변환된 학습 데이터의 형식을 비교 분석

---

## ✅ 주요 개선 사항

### 1. 구조 통일 완료

**Before (문제):**
```
통합 데이터:
  상세정보/
    └─ 판례내용/  ← 중첩 구조
        ├─ 판시사항
        └─ 판결요지
```

**After (해결):**
```
크롤링 & 통합 데이터 (동일):
  상세정보/  ← 평평한 구조
    ├─ 판시사항
    └─ 판결요지
```

✅ **구조 일치: 평평한 구조로 통일**

---

## 📋 데이터 형식 비교

### 크롤링 데이터 (API 수집)

```json
{
  "검색어": "교통사고",
  "데이터타입": "판례",
  "사건번호": "2025도1049",
  "선고일자": "2025.06.12",
  "법원명": "대법원",
  "판례일련번호": "606761",
  "수집시각": "2025-11-03T17:47:02.289970",

  "상세정보": {
    "판시사항": " [1] 안전지대 옆을 통과하는 차량의...",
    "판결요지": " [1] 차량의 안전지대 횡단은...",
    "참조조문": "교통사고처리 특례법 제3조...",
    "참조판례": "대법원 2015.11.12. 선고 2015도13364...",
    "판례내용": "【주 문】...(전문 4369자)",
    "사건종류명": "형사",
    "법원명": "대법원",
    "사건번호": "2025도1049",
    "선고일자": "2025.06.12"
  }
}
```

**특징:**
- 상세정보에 15개 필드
- 판례내용 = 전문
- 중복 필드 많음 (법원명, 사건번호 등)

---

### 통합 데이터 (학습 데이터 변환)

#### A. CSV 전문이 있는 케이스 (81.2%)

```json
{
  "검색어": "교통사고",
  "데이터타입": "판례",
  "사건번호": "2013노7",
  "선고일자": "2013.XX.XX",
  "법원명": "광주고등법원",
  "판례일련번호": "xxxxx",
  "수집시각": "2025-11-03T17:48:22",

  "상세정보": {
    "판시사항": "",
    "판결요지": "",
    "이유": "원심은 피고인 2에 대한 공소사실 중...",
    "주문": "피고인 2의 항소와 검사의...",
    "참조조문": "교통사고처리특례법 제4조...",
    "참조판례": "",
    "전문": "【피 고 인】\n【항 소 인】...(전문 9030자)"
  },

  "메타데이터": {
    "CSV존재여부": true,
    "매칭키워드": ["교통사고", "차량"],
    "AI학습데이터": {
      "instruction": "...",
      "input": "...",
      "output": "..."
    }
  }
}
```

**특징:**
- 상세정보에 7개 필드 (정제된 구조)
- 전문 포함 (CSV에서 읽음)
- 판시사항, 판결요지, 이유, 주문 분리
- 메타데이터에 AI 학습 정보 보존

---

#### B. CSV 전문이 없는 케이스 (18.8%)

```json
{
  "검색어": "특정범죄가중처벌등에관한법률",
  "데이터타입": "판례",
  "사건번호": "2007노1012",
  "선고일자": "2007.05.01",
  "법원명": "부산지방법원",
  "판례일련번호": "78434",

  "상세정보": {
    "질의지침": "질의에 대한 응답은...",
    "질문": "법원이 피고인의 절도 행위에 대해...",
    "판결요지": "법원은 특정범죄가중처벌 등에 관한...",
    "참조조문": "",
    "전문": ""
  },

  "메타데이터": {
    "CSV존재여부": false,
    "AI학습데이터": {
      "instruction": "...",
      "input": "...",
      "output": "판결 요지"
    }
  }
}
```

**특징:**
- AI 학습 데이터만 있는 경우
- 질의지침, 질문, 판결요지 구조
- 전문 없음 (CSV 파일 없음)

---

## 🔍 상세 비교

| 항목 | 크롤링 데이터 | 통합 데이터 (CSV 있음) | 통합 데이터 (CSV 없음) |
|------|-------------|---------------------|-------------------|
| **상세정보 구조** | 평평함 | 평평함 ✅ | 평평함 ✅ |
| **상세정보 키 개수** | 15개 | 7개 | 5개 |
| **판시사항** | ✅ | ✅ | ❌ |
| **판결요지** | ✅ | ✅ | ✅ |
| **참조조문** | ✅ | ✅ | ✅ |
| **전문** | ✅ (판례내용) | ✅ (전문) | ❌ |
| **주문** | ❌ | ✅ | ❌ |
| **이유** | ❌ | ✅ | ❌ |
| **AI 학습 데이터** | ❌ | ✅ (메타데이터) | ✅ (메타데이터) |

---

## 💡 주요 차이점

### 1. 필드 구성

**크롤링 데이터:**
- 상세정보에 모든 정보 포함
- 중복 필드 많음 (법원명, 사건번호 등이 최상위와 상세정보에 중복)
- 판례내용 = 전문

**통합 데이터:**
- 정제된 구조 (중복 제거)
- CSV 전문이 있으면: 판시사항, 판결요지, 이유, 주문, 전문 분리
- CSV 전문이 없으면: AI 학습 데이터 (질의지침, 질문, 판결요지)

---

### 2. 데이터 품질

| 측면 | 크롤링 | 통합 (CSV 있음) | 통합 (CSV 없음) |
|------|--------|----------------|----------------|
| **전문 포함** | ✅ | ✅ | ❌ |
| **구조화** | ⚠️ (모든 필드 혼재) | ✅ (정제됨) | ✅ (정제됨) |
| **AI 학습** | ❌ | ✅ | ✅ |
| **메타데이터** | ❌ | ✅ | ✅ |

---

## 📊 통계

### 샘플 수집 결과

**크롤링 (방금 수집):**
- 판례: 20건
- 해석례: 0건
- 키워드: "교통사고" 1개
- 페이지: 1페이지만

**통합 데이터:**
- 판례: 9,198건
- 결정례: 466건
- 해석례: 12건
- 법령: 2,093건
- 총 11,769건
- CSV 전문 포함: 9,557건 (81.2%)

---

## ✅ 호환성 평가

### 공통 필드 (완벽하게 일치)

```
✅ 검색어
✅ 데이터타입
✅ 사건번호
✅ 선고일자
✅ 법원명
✅ 판례일련번호
✅ 수집시각
✅ 상세정보 (딕셔너리)
✅ 판결요지 (상세정보 내)
✅ 참조조문 (상세정보 내)
```

### 구조적 차이

| 차이점 | 영향 | 해결 방안 |
|--------|------|----------|
| 상세정보 키 개수 | 크롤링(15개) vs 통합(5~7개) | 병합 시 키 매핑 필요 |
| 판례내용 vs 전문 | 필드명 다름 | 통일 필요 |
| 중복 필드 | 크롤링은 중복 많음 | 정제 필요 |

---

## 🎯 결론

### ✅ 성공한 부분

1. **구조 통일**: 평평한 구조로 통일 완료
2. **기본 필드**: 검색어, 사건번호, 법원명 등 완벽하게 일치
3. **전문 포함**: 81.2% 케이스에 전문 포함
4. **메타데이터**: AI 학습 데이터 보존

### ⚠️ 추가 작업 필요

1. **필드명 통일**
   ```
   크롤링: 판례내용 (전문)
   통합: 전문
   → 둘 중 하나로 통일 필요
   ```

2. **상세정보 키 일치**
   ```
   크롤링: 판시사항, 판결요지, 참조조문, 판례내용 등 15개
   통합: 판시사항, 판결요지, 이유, 주문, 전문 등 7개
   → 공통 키 매핑 필요
   ```

3. **병합 로직**
   ```python
   # 두 데이터 병합 시
   def unify_detail_fields(detail):
       # 판례내용 → 전문 통일
       if '판례내용' in detail and '전문' not in detail:
           detail['전문'] = detail['판례내용']

       # 공통 키만 유지
       common_keys = ['판시사항', '판결요지', '참조조문', '전문']
       return {k: detail.get(k, '') for k in common_keys}
   ```

---

## 🚀 권장 사항

### Option 1: 크롤링 스크립트 수정 (추천)

크롤링 스크립트를 수정하여 통합 데이터 형식에 맞추기:

```python
# scripts/crawl_legal_cases.py 수정
detail_info = {
    "판시사항": detail.get("판시사항", ""),
    "판결요지": detail.get("판결요지", ""),
    "참조조문": detail.get("참조조문", ""),
    "전문": detail.get("판례내용", ""),  # 판례내용 → 전문
    # 중복 필드 제거
}
```

### Option 2: 병합 스크립트 작성

두 데이터를 병합하는 스크립트 작성:

```bash
python scripts/merge_crawling_and_unified.py \
  traffic_legal_data_*.json \
  unified_traffic_data/unified_traffic_data_*.json \
  --output merged_data/
```

---

## 📝 요약

| 항목 | 상태 |
|------|------|
| **구조 호환성** | ✅ 완벽 (평평한 구조) |
| **기본 필드** | ✅ 일치 |
| **상세정보 구조** | ⚠️ 키 개수 다름 |
| **전문 포함** | ✅ 81.2% |
| **병합 가능성** | ✅ 가능 (필드 매핑 필요) |

---

**작성일:** 2025-11-03
**크롤링 샘플:** traffic_legal_data_20251103_174711.json (20건)
**통합 데이터:** unified_traffic_data_20251103_174822.json (11,769건)
